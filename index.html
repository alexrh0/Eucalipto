<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historia del Eucalipto</title>
    <style>
        /* Estilos generales */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        /* Estilos para el video de fondo */
        .background-video-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        .background-video {
            position: absolute;
            top: 0;
            left: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
        }
        /* Estilos para los textos que flotan sobre el video */
        #intro-text, #instructions, #story-form {
            color: black;
            position: relative;
            text-align: center;
            z-index: 2;
            background: transparent;
        }

        /* Texto principal */
        #intro-text {
            font-size: 40px;
            font-weight: bold;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Instrucciones */
        #instructions {
            font-size: 20px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Formulario de entrada */
        #story-form {
            padding: 20px;
        }
        #story-form input[type="text"], #story-form textarea {
            width: 70%;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 16px;
        }
        #story-form input[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }

        /* Para que los textos y formulario estén alineados y centrados */
        .floating-content {
            position: absolute;
            top: 20%;
            width: 100%;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <!-- Contenedor del video de fondo -->
    <div class="background-video-container" id="video-container">
        <video class="background-video" autoplay loop muted>
            <source src="corteza.mp4" type="video/mp4">
            Tu navegador no soporta la reproducción de videos.
        </video>
        <!-- Segundo video que se añade inmediatamente debajo del primero -->
        <video class="background-video" autoplay loop muted style="top: 100%;">
            <source src="corteza.mp4" type="video/mp4">
            Tu navegador no soporta la reproducción de videos.
        </video>
    </div>

    <!-- Contenido flotante -->
    <div class="floating-content">
        <!-- Texto principal flotante -->
        <div id="intro-text">
            5 de agosto 2024, Plazuela Ricardo Flores Magón, Ayuntamiento 1985-1988, Cuernavaca Morelos. Mi cuerpo ha dado todo lo que puede, me desmorono como la corteza del eucalipto que me cubre del sol. Caminé tanto para llegar a este punto, un sitio que es atravesado por un momento que marcó la vida de alguien más. Si observas bien encuentras basura de temporalidades distintas, de historias que me permiten conocer este lugar, ¿Qué es lo que me dicen?
        </div>

        <!-- Instrucciones flotantes -->
        <div id="instructions">
            Ve hasta abajo y lee la última entrada para continuar con la historia. Escribe la fecha y el lugar donde te encuentras a modo de diario. El texto puede ser verídico o ficción, todo gira alrededor del eucalipto.
        </div>

        <!-- Formulario flotante para agregar parte de la historia -->
        <div id="story-form">
            <form id="storyForm">
                <input type="text" id="storyDate" placeholder="Escribe la fecha y el lugar">
                <textarea id="storyInput" placeholder="Escribe tu parte de la historia..." rows="4"></textarea>
                <input type="submit" value="Agregar">
            </form>
        </div>
    </div>

    <script>
        // Agregar nueva parte de la historia
        document.getElementById('storyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const storyDate = document.getElementById('storyDate').value;
            const storyInput = document.getElementById('storyInput').value;
            if (storyDate.trim() !== "" && storyInput.trim() !== "") {
                // Mostrar nueva entrada directamente en la historia
                const storyContainer = document.getElementById('story-container');
                const newEntry = document.createElement('p');
                newEntry.textContent = `${storyDate}: ${storyInput}`;
                storyContainer.appendChild(newEntry);

                // Limpiar el formulario después de enviar
                document.getElementById('storyDate').value = "";
                document.getElementById('storyInput').value = "";

                // Añadir nuevos videos cuando se agregue una nueva entrada
                addNewVideo();
            }
        });

        // Función para añadir un nuevo video debajo del último video en la página
        function addNewVideo() {
            const videoContainer = document.getElementById('video-container');
            const newVideo = document.createElement('video');
            newVideo.classList.add('background-video');
            newVideo.autoplay = true;
            newVideo.loop = true;
            newVideo.muted = true;
            newVideo.innerHTML = `
                <source src="corteza.mp4" type="video/mp4">
                Tu navegador no soporta la reproducción de videos.
            `;
            // Posiciona el nuevo video debajo de los existentes
            const lastVideo = videoContainer.querySelectorAll('video').length * 100;
            newVideo.style.top = `${lastVideo}vh`;
            videoContainer.appendChild(newVideo);
        }

        // Asegurarse de que el primer video se reproduzca correctamente en loop y sin sonido
        document.querySelectorAll('.background-video').forEach(function(video) {
            video.muted = true;
            video.play();
        });
    </script>
</body>
</html>
