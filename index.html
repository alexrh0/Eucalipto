<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historia del Eucalipto</title>
    <style>
        /* Estilos generales */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        /* Estilos para el video de fondo */
        .background-video-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        .background-video {
            position: absolute;
            top: 0;
            left: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
        }
        /* Estilos para el texto principal que flota */
        #intro-text {
            font-size: 40px;
            font-weight: bold;
            text-align: center;
            padding: 100px 20px;
            color: black;
            position: absolute;
            top: 10%;
            width: 100%;
            z-index: 2;
        }
        /* Estilos para las instrucciones que flotan debajo del texto */
        #instructions {
            font-size: 20px;
            text-align: center;
            padding: 20px;
            color: black;
            position: absolute;
            top: 25%;
            width: 100%;
            z-index: 2;
        }
        /* Contenedor para las entradas */
        .entry-container {
            position: relative;
            width: 80%;
            margin: 0 auto;
            padding: 20px;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            z-index: 3;
            margin-bottom: 20px;
        }
        /* Formulario flotante para agregar entradas */
        #story-form {
            position: absolute;
            top: 35%;
            text-align: center;
            width: 100%;
            z-index: 3;
        }
        #story-form input[type="text"], #story-form textarea {
            width: 70%;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 16px;
        }
        #story-form input[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Video de fondo que se repite -->
    <div class="background-video-container">
        <video class="background-video" autoplay loop muted>
            <source src="corteza.mp4" type="video/mp4">
            Tu navegador no soporta la reproducción de videos.
        </video>
    </div>

    <!-- Texto principal flotante -->
    <div id="intro-text">
        5 de agosto 2024, Plazuela Ricardo Flores Magón, Ayuntamiento 1985-1988, Cuernavaca Morelos. Mi cuerpo ha dado todo lo que puede, me desmorono como la corteza del eucalipto que me cubre del sol. Caminé tanto para llegar a este punto, un sitio que es atravesado por un momento que marcó la vida de alguien más. Si observas bien encuentras basura de temporalidades distintas, de historias que me permiten conocer este lugar, ¿Qué es lo que me dicen?
    </div>

    <!-- Instrucciones flotantes -->
    <div id="instructions">
        Ve hasta abajo y lee la última entrada para continuar con la historia. Escribe la fecha y el lugar donde te encuentras a modo de diario. El texto puede ser verídico o ficción, todo gira alrededor del eucalipto.
    </div>

    <!-- Formulario flotante para agregar parte de la historia -->
    <div id="story-form">
        <form id="storyForm">
            <input type="text" id="storyDate" placeholder="Escribe la fecha y el lugar">
            <textarea id="storyInput" placeholder="Escribe tu parte de la historia..." rows="4"></textarea>
            <input type="submit" value="Agregar">
        </form>
    </div>

    <!-- Contenedor de la historia -->
    <div class="entry-container" id="story-container"></div>

    <script>
        // Simulación de la historia almacenada
        let story = [
            "5 de agosto 2024, Plazuela Ricardo Flores Magón, Cuernavaca: Mi cuerpo ha dado todo lo que puede...",
            "10 de septiembre 2024, parque de Los Álamos, Cuernavaca: El eucalipto sigue aquí..."
        ];

        // Mostrar la historia en el contenedor
        function updateStory() {
            const storyContainer = document.getElementById('story-container');
            storyContainer.innerHTML = story.map(entry => `<p>${entry}</p>`).join('');
        }

        // Agregar nueva parte de la historia
        document.getElementById('storyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const storyDate = document.getElementById('storyDate').value;
            const storyInput = document.getElementById('storyInput').value;
            if (storyDate.trim() !== "" && storyInput.trim() !== "") {
                story.push(`${storyDate}: ${storyInput}`);
                document.getElementById('storyDate').value = "";
                document.getElementById('storyInput').value = "";
                updateStory();

                // Añadir nuevo video tras cada entrada
                addNewVideo();
            }
        });

        // Inicializar la historia
        updateStory();

        // Función para añadir un nuevo video mientras bajas por la página
        function addNewVideo() {
            const newVideoContainer = document.createElement('div');
            newVideoContainer.classList.add('background-video-container');
            newVideoContainer.innerHTML = `
                <video class="background-video" autoplay loop>
                    <source src="corteza.mp4" type="video/mp4">
                    Tu navegador no soporta la reproducción de videos.
                </video>
            `;
            document.body.appendChild(newVideoContainer);
        }

        // Desactivar el silencio del video principal para que se escuche
        document.querySelector('.background-video').muted = false;

    </script>
</body>
</html>
